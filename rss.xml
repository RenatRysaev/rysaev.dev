<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Блог о веб-разработке]]></title><description><![CDATA[Персональный блог Рената Рысаева. Я пишу о JavaScript, TypeScript, React.js, Node.js, Webpack, CI/CD.]]></description><link>https://rysaev.dev</link><generator>RSS for Node</generator><lastBuildDate>Mon, 29 Jul 2019 20:22:41 GMT</lastBuildDate><item><title><![CDATA[Используем Docker для разработки и развертывания React-приложений. Часть 2.]]></title><description><![CDATA[Это вторая часть, в которой мы разберемся с тем как подготовить Docker-образ с React-приложением для тестирования и развертывания на…]]></description><link>https://rysaev.dev/react-ci-cd-2/</link><guid isPermaLink="false">https://rysaev.dev/react-ci-cd-2/</guid><pubDate>Mon, 22 Jul 2019 00:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;Это вторая часть, в которой мы разберемся с тем как подготовить Docker-образ с React-приложением для тестирования и развертывания на удаленном сервере&lt;/h3&gt;
&lt;p&gt;&lt;b&gt;В &lt;a href=&quot;https://rysaev.dev/react-ci-cd-1/&quot;&gt;прошлой части&lt;/a&gt; мы настраивали окружение для
разработки нашего приложения.&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;&lt;b&gt;Сегодня мы подготовим два Docker-образа для тестирования и деплоя приложения + настроим Nginx для раздачи статики.&lt;/b&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/RenatRysaev/dockerized-react/tree/react-ci-cd-2&quot;&gt;Репозиторий с итоговым кодом&lt;/a&gt; для этой статьи&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Первым делом давайте переименуем уже существующий Dockerfile -&gt; Dockerfile.dev.&lt;br&gt;
Затем создадим еще два Dockerfile, назвав их Dockerfile.test и Dockerfile.prod, которые мы будем использовать для CI/CD.&lt;/p&gt;
&lt;p&gt;&lt;b&gt;Dockerfile.test&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre class=&quot;language-dockerfile&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# Берем в качестве родительского образа node:8-apline&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;8&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;alpine
&lt;span class=&quot;token comment&quot;&gt;# Устанавливаем рабочую директорию&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;WORKDIR&lt;/span&gt; /app
&lt;span class=&quot;token comment&quot;&gt;# Копируем файлы package.json yarn.lock в рабочую директорию&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; package.json yarn.lock /app/
&lt;span class=&quot;token comment&quot;&gt;# Устаналиваем зависимости&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; yarn install
&lt;span class=&quot;token comment&quot;&gt;# Копируем исходники в рабочую директорию&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; . /app/
&lt;span class=&quot;token comment&quot;&gt;# Запускаем тесты&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; CI=true yarn test
&lt;span class=&quot;token comment&quot;&gt;# Собираем проект&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; yarn build&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Dockerfile.prod&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre class=&quot;language-dockerfile&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# Берем в качестве родительского образа node:8-apline и назовем эту ступень сборки &lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;build-stage&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;8&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;alpine as build&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;stage
&lt;span class=&quot;token comment&quot;&gt;# Устанавливаем рабочую директорию&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;WORKDIR&lt;/span&gt; /app
&lt;span class=&quot;token comment&quot;&gt;# Копируем файлы package.json yarn.lock в рабочую директорию&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; package.json yarn.lock /app/
&lt;span class=&quot;token comment&quot;&gt;# Устаналиваем зависимости&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; yarn install
&lt;span class=&quot;token comment&quot;&gt;# Копируем исходники в рабочую директорию&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; . /app/
&lt;span class=&quot;token comment&quot;&gt;# Собираем проект&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; yarn build

&lt;span class=&quot;token comment&quot;&gt;# Вторая ступень сборки, поднимем nginx для раздачи статики&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; nginx&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;stable&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;alpine
&lt;span class=&quot;token comment&quot;&gt;# Копируем билд из ступени сборки &lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;build-stage&quot;&lt;/span&gt; в директорию образа /usr/share/nginx/html
&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;from=build&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;stage /app/build /usr/share/nginx/html
&lt;span class=&quot;token comment&quot;&gt;# Копируем конфиг nginx в директорию образа /etc/nginx/nginx.conf (Напишем его позже)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; nginx.conf /etc/nginx/nginx.conf
&lt;span class=&quot;token comment&quot;&gt;# Открываем 80 порт&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;EXPOSE&lt;/span&gt; 80
&lt;span class=&quot;token comment&quot;&gt;# Указываем команду, поднимающую nginx при запуске контейнера&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;CMD&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;nginx&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;-g&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;daemon off;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Напишем конфиг для Nginx&lt;/h3&gt;
&lt;p&gt;&lt;b&gt;nginx.conf&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;&lt;pre class=&quot;language-nginx&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# Автоматически определяем количество процессов&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;worker_processes&lt;/span&gt; auto&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;events&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# Устанавливаем максимальное кол-во соединений для одного рабочего процесса&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;worker_connections&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# Указывем nginx, чтобы он пытался принять максимльное кол-во подключений&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;multi_accept&lt;/span&gt; on&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;http&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# Указываем корректные заголовки для всех типов расширений&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;include&lt;/span&gt; mime&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;types&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;default_type&lt;/span&gt; application&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;octet&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;stream&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# Увеличиваем производительность&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;sendfile&lt;/span&gt; on&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# Сжимаем данные&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;gzip&lt;/span&gt; on&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;gzip_comp_level&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;gzip_min_length&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;gzip_http_version&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;gzip_types&lt;/span&gt; text&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;plain text&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;css application&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;json application&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;javascript text&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;xml application&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;xml application&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;xml&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;rss text&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;javascript&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;html &lt;span class=&quot;token keyword&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;htm&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# Слушаем 80 порт&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;listen&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# Директория из которой раздаем статику&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;root&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;usr&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;share&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;nginx&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;html&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
        &lt;span class=&quot;token comment&quot;&gt;# Сначала пытаемся обработать запрос как к файлу или директории&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;try_files&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$uri&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$uri&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;html&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Собираем образ и запускаем контейнер&lt;/h3&gt;
&lt;p&gt;Сборка образа для тестирования:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker build -t dockerized-react:test -f Dockerfile.test &lt;span class=&quot;token keyword&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Сборка образа для продакшена:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker build -t dockerized-react:prod -f Dockerfile.prod &lt;span class=&quot;token keyword&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Для того, чтобы запустить контейнер и убедиться в том, что Nginx раздает статику выполните:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker run -it -p 80:80 dockerized-react:prod&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Откройте &lt;a href=&quot;http://localhost/&quot;&gt;localhost&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Теперь мы имеем контейнер с Nginx, который умеет раздавать сборку нашего приложения.&lt;/p&gt;
&lt;p&gt;&lt;b&gt;В итоге мы имеем три Docker-образа:&lt;/b&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Для разработки&lt;/li&gt;
&lt;li&gt;Для тестирования&lt;/li&gt;
&lt;li&gt;Для продакшена&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;b&gt;В следующей статье мы будем разбираться с тем как с помощью Jenkins развернуть Docker-контейнер
на удаленном сервере.&lt;/b&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Используем Docker для разработки и развертывания React-приложений. Часть 1.]]></title><description><![CDATA[Я планирую серию статей, в которых постараюсь раскрыть следующие темы: Docker для разработки React-приложения Docker для развертывания React…]]></description><link>https://rysaev.dev/react-ci-cd-1/</link><guid isPermaLink="false">https://rysaev.dev/react-ci-cd-1/</guid><pubDate>Sun, 21 Jul 2019 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Я планирую серию статей, в которых постараюсь раскрыть следующие темы:&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://rysaev.dev/react-ci-cd-1/&quot;&gt;&lt;b&gt;Docker для разработки React-приложения&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://rysaev.dev/react-ci-cd-2/&quot;&gt;&lt;b&gt;Docker для развертывания React-приложения + Nginx для раздачи статики&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;b&gt;CI/CD с использованием Jenkins&lt;/b&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Это первая часть, в которой мы разберемся с тем как настроить окружение для разработки с Docker + React&lt;/h3&gt;
&lt;h3&gt;Вступление&lt;/h3&gt;
&lt;p&gt;Все началось с того, что однажды на рабочем проекте потребовалось обновить зависимости.
После долгих мучений я наконец-то запушил свой коммит в репозиторий и отправился к нашему девопсу,
чтобы попросить задеплоить сборку из jenkins на тестовый сервер. Ну и как вы уже, наверное, догадываетесь девопсу этого сделать
не удалось, потому что на сервере с jenkins стояла node.js другой версии и закешировались старые версии библиотек.
Я бы скорее всего решил эту проблему, но на следующий рабочий день меня переводили на другой проект.&lt;/p&gt;
&lt;p&gt;Ну собственно я к чему, используя docker, мы точно бы не имели этих проблем, и вот почему:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Единое окружение локально и на сервере&lt;/li&gt;
&lt;li&gt;Воспроизводимость&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Поэтому я решил немного раскурить Docker и поделиться полезной информацией о том
как его использовать для разработки и деплоя.  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/RenatRysaev/dockerized-react/tree/react-ci-cd-1&quot;&gt;Репозиторий с итоговым кодом&lt;/a&gt; для этой статьи&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;b&gt;Предпологается что на вашей машине уже установлено:&lt;/b&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://www.docker.com/&quot;&gt;Docker&lt;/a&gt; v18.09.2&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/create-react-app&quot;&gt;Create React App&lt;/a&gt; v3.0.1&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Создание проекта&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;create-react-app dockerized-react
&lt;span class=&quot;token function&quot;&gt;cd&lt;/span&gt; dockerized-react&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Напишем наш Dockerfile для создания образа&lt;/h3&gt;
&lt;p&gt;&lt;b&gt;Dockerfile&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre class=&quot;language-dockerfile&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# Берем node.js v8 в качестве родительского образа&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;8
&lt;span class=&quot;token comment&quot;&gt;# Устанавливаем рабочую директорию&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;WORKDIR&lt;/span&gt; /app
&lt;span class=&quot;token comment&quot;&gt;# Копируем файлы yarn.lock и package.json в рабочую директорию&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; package.json yarn.lock /app/
&lt;span class=&quot;token comment&quot;&gt;# Устанавливаем зависимости&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; yarn install
&lt;span class=&quot;token comment&quot;&gt;# Открываем порт 3000&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;EXPOSE&lt;/span&gt; 3000
&lt;span class=&quot;token comment&quot;&gt;# Запускаем React-приложение после запуска контейнера&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;CMD&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;yarn&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;start&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Добавим в .dockerignore директории/файлы, которые не должны попасть в образ&lt;/h3&gt;
&lt;p&gt;&lt;b&gt;.dockerignore&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;.git
node_modules
build&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Создание образа&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker build -t dockerized-app:dev &lt;span class=&quot;token keyword&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Запуск контейнера&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker run -it -v &lt;span class=&quot;token variable&quot;&gt;${PWD}&lt;/span&gt;:/app -v /app/node_modules -p 3001:3000 -e CHOKIDAR_USEPOLLING&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;true dockerized-app:dev&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Для Windows&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;docker run -it -v %cd%:/app -v /app/node_modules -p 3001:3000 -e CHOKIDAR_USEPOLLING&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;true dockerized-app&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Давайте разберемся для чего и какие аргументы мы передаем&lt;/b&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;“-it” - интерактивный режим&lt;/li&gt;
&lt;li&gt;“-v ${PWD}:/app” - монтируем текущую рабочую директорию в директорию /app docker-контейнера&lt;/li&gt;
&lt;li&gt;“-v /app/node&lt;em&gt;modules” - используем node&lt;/em&gt;modules из контейнера&lt;/li&gt;
&lt;li&gt;“-p” - сопоставляем порт docker-контейнера порту на хост системе&lt;/li&gt;
&lt;li&gt;“-e CHOKIDAR_USEPOLLING=true” - устанавливаем переменную окружения для принудительного слежения webpack за нашим томом.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Осталось открыть приложение в браузере &lt;a href=&quot;http://localhost:3001/&quot;&gt;http://localhost:3001/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Готово, теперь webpack отслеживает изменения файлов и изменив код в каком-либо файле мы сможем увидеть результат в браузере.&lt;/p&gt;
&lt;p&gt;&lt;b&gt;В следующей статье мы будем разбираться с тем подготовить окружение для развертывания Docker + React&lt;/b&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Знакомство]]></title><description><![CDATA[Кто я такой ? Меня зовут Ренат, я живу в Челябинске и работаю в компании по разработке ПО на позиции ведущего frontend-разработчика. Мне…]]></description><link>https://rysaev.dev/about-me/</link><guid isPermaLink="false">https://rysaev.dev/about-me/</guid><pubDate>Thu, 18 Jul 2019 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Кто я такой ?&lt;/h2&gt;
&lt;p&gt;Меня зовут Ренат, я живу в Челябинске и работаю в компании по разработке ПО на позиции ведущего frontend-разработчика.&lt;br&gt;
Мне нравится изучать новые технологии и расширять свой кругозор.&lt;br&gt;
В текущий момент использую React и все то разнообразие, которое существует вокруг этой библиотеки. &lt;/p&gt;
&lt;h2&gt;О чем буду писать ?&lt;/h2&gt;
&lt;p&gt;Преимущественно о тех вещах, которые мне интересны в определенный промежуток времени.
К примеру, я занимался разработкой проекта на &lt;del&gt;php и jq&lt;/del&gt; и спустя некоторое время
научился использовать эти вещи &lt;del&gt;как батя&lt;/del&gt;. Приобретя некоторый опыт, я напишу статью
о том с какими трудностями я сталкивался и как старался их решить.&lt;/p&gt;
&lt;h2&gt;Зачем мне это нужно ?&lt;/h2&gt;
&lt;p&gt;Я считаю, что написание статей принесет следующую пользу:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Навык излагать свои мысли понятно, доходчиво и сжато в письменной форме&lt;/li&gt;
&lt;li&gt;Технические навыки&lt;/li&gt;
&lt;li&gt;Я надеюсь это принесет пользу читателям&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item></channel></rss>